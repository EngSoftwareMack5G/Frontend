<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Mentorias</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
    <header class="bg-white px-6 py-4 flex justify-between items-center border-b">
      <input type="text" placeholder="Search" class="border border-gray-300 rounded px-3 py-1 text-sm">
      <a href="../home.html" class="text-xl font-semibold">MackLink</a>
      <a href="../profile.html" class="text-sm text-gray-600 hover:underline">Entrar</a>
    </header>
    <nav class="bg-white border-b px-6 py-3 flex flex-wrap gap-6 justify-center text-sm font-semibold text-gray-700">
      <a href="../about.html">SOBRE O PROJETO</a>
      <a href="../recents.html" class="font-bold text-black">RECENTES</a>
      <a href="../my_mentorships.html">MINHAS MENTORIAS</a>
      <a href="../feedbacks.html">FEEDBACKS</a>
    </nav>
    <div class="flex flex-col items-center justify-center min-h-screen p-6">
        <div class="w-full max-w-lg bg-white p-6 rounded shadow">
            <h1 class="text-2xl font-bold mb-4">Criar Nova Mentoria</h1>
            <form id="mentoriaForm" class="space-y-4">
                <input type="text" id="titulo" placeholder="Título" class="w-full p-2 border rounded" required>
                <textarea id="descricao" placeholder="Descrição" class="w-full p-2 border rounded" required></textarea>
                <input type="date" id="data" class="w-full p-2 border rounded" required>
                <select id="topico" class="w-full p-2 border rounded" required>
                    <option value="">Selecione o tópico</option>
                    <option value="Carreiras">Carreiras</option>
                    <option value="Lideranças">Lideranças</option>
                    <option value="Financeiro">Financeiro</option>
                    <option value="Negócios">Negócios</option>
                </select>
                <input type="text" id="autor" class="w-full p-2 border rounded bg-gray-100" readonly>
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Salvar Mentoria</button>
                <a href="my_mentorships.html" class="inline-block ml-4 text-blue-500 hover:underline">Voltar</a>
            </form>
        </div>
    
        <script>
            // Carrega o primeiro perfil como autor padrão
            fetch('http://localhost:3000/perfis')
                .then(res => res.json())
                .then(data => {
                    if (data.length > 0) {
                        document.getElementById('autor').value = data[0].nome;
                    }
                });
    
            document.getElementById('mentoriaForm').addEventListener('submit', function(e) {
                e.preventDefault();
    
                const titulo = document.getElementById('titulo').value.trim();
                const descricao = document.getElementById('descricao').value.trim();
                const data = document.getElementById('data').value;
                const topico = document.getElementById('topico').value;
                const autor = document.getElementById('autor').value;
    
                if (titulo && descricao && data && topico && autor) {
                    fetch('http://localhost:3000/mentorias', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ titulo, descricao, autor, data, topico })
                    }).then(() => {
                        window.location.href = 'my_mentorships.html';
                    });
                } else {
                    alert('Preencha todos os campos.');
                }
            });
        </script>
</body>
</html>